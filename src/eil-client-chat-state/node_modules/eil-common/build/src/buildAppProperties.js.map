{"version":3,"sources":["eil-common/src/buildAppProperties.js"],"names":["addFormat","name","validate","val","downcased","toLowerCase","Error","defaultSchema","env","doc","format","default","logger","level","buildAppProperties","schema","config","strict"],"mappings":";;;;;;;;AACA;;;;;;AAEA,kBAAQA,SAAR,CAAkB;AAChBC,QAAM,SADU;AAEhBC,UAFgB,oBAEPC,GAFO,EAEF;AACZ,QAAMC,YAAY,CAACD,OAAO,EAAR,EAAYE,WAAZ,EAAlB;AACA,QAAI,EAAED,cAAc,EAAd,IAAoBA,cAAc,MAAlC,IAA4CA,cAAc,OAA1D,IAAqEA,cAAc,GAAnF,IAA0FA,cAAc,GAA1G,CAAJ,EAAoH;AAClH,YAAM,IAAIE,KAAJ,CAAU,6CAAV,CAAN;AACD;AACF;AAPe,CAAlB;AASA,IAAMC,gBAAgB;AACpBC,OAAK;AACHC,SAAK,sBADF;AAEHC,YAAQ,CAAC,aAAD,EAAgB,MAAhB,EAAwB,YAAxB,CAFL;AAGHC,aAAS,aAHN;AAIHH,SAAK;AAJF,GADe;;AAQpBI,UAAQ;AACNC,WAAO;AACLJ,WAAK,qBADA;AAELC,cAAQ,CACN,OADM,EAEN,OAFM,EAGN,MAHM,EAIN,MAJM,EAKN,OALM,EAMN,KANM,CAFH;AAULC,eAAS,KAVJ;AAWLH,WAAK;AAXA;AADD;AARY,CAAtB;;AA0BA,SAASM,kBAAT,GAAoF;AAAA,MAA9CC,MAA8C,uEAA7B,EAA6B;;AAClF,MAAMC,SAAkC,oCACnCT,aADmC,EAEnCQ,MAFmC,EAAxC;;AAKAC,SAAOd,QAAP,CAAgB,EAAEe,QAAQ,IAAV,EAAhB;;AAEA,SAAOD,MAAP;AACD;;kBAEcF,kB","file":"eil-common/src/buildAppProperties.js","sourcesContent":["//@flow\nimport convict from 'convict';\n\nconvict.addFormat({\n  name: 'boolean',\n  validate(val) {\n    const downcased = (val || '').toLowerCase();\n    if (!(downcased === '' || downcased === 'true' || downcased === 'false' || downcased === '1' || downcased === '0')) {\n      throw new Error('A boolean must be one of: true, false, 0, 1');\n    }\n  },\n});\nconst defaultSchema = {\n  env: {\n    doc: 'The current NODE_ENV',\n    format: ['development', 'test', 'production'],\n    default: 'development',\n    env: 'NODE_ENV',\n  },\n\n  logger: {\n    level: {\n      doc: 'The level to log at',\n      format: [\n        'trace',\n        'debug',\n        'info',\n        'warn',\n        'error',\n        'env'\n      ],\n      default: 'env',\n      env: 'LOG_LEVEL',\n    }\n  }\n};\n\n\nfunction buildAppProperties<PropList>(schema: Object = {}): AppProperties<PropList> {\n  const config: AppProperties<PropList> = convict({\n    ...defaultSchema,\n    ...schema,\n  });\n\n  config.validate({ strict: true });\n\n  return config;\n}\n\nexport default buildAppProperties;\n"],"sourceRoot":"/source/"}
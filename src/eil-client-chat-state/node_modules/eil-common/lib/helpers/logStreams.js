'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = logStreams;

var _gelfStream = require('gelf-stream');

// for some reason the log is being passed as JSON string, so it needs to be parsed first.
var bunyanToGelfFix = function bunyanToGelfFix(log) {
  var _log = typeof log === 'string' ? JSON.parse(log) : log;

  return (0, _gelfStream.bunyanToGelf)(_log);
};

function logStreams() {
  var streams = [{
    stream: process.stdout
  }];

  if (process.env.GRAYLOG_SERVER_HOST || process.env.GRAYLOG_SERVER_PORT) {
    var _process$env = process.env,
        _process$env$GRAYLOG_ = _process$env.GRAYLOG_SERVER_HOST,
        host = _process$env$GRAYLOG_ === undefined ? 'localhost' : _process$env$GRAYLOG_,
        _process$env$GRAYLOG_2 = _process$env.GRAYLOG_SERVER_PORT,
        port = _process$env$GRAYLOG_2 === undefined ? 5555 : _process$env$GRAYLOG_2;


    var options = {
      map: bunyanToGelfFix
    };

    var stream = new _gelfStream.GelfStream(host, port, options);
    streams.push({
      stream: stream
    });
  }

  return streams;
}
//# sourceMappingURL=logStreams.js.map

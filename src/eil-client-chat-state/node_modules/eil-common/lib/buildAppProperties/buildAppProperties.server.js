'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _convict = require('convict');

var _convict2 = _interopRequireDefault(_convict);

var _appPropertiesDefaultSchema = require('./appPropertiesDefaultSchema');

var _appPropertiesDefaultSchema2 = _interopRequireDefault(_appPropertiesDefaultSchema);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

_convict2.default.addFormat({
  name: 'boolean',
  validate: function validate(val) {
    var downcased = (val || '').toLowerCase();
    if (!(downcased === '' || downcased === 'true' || downcased === 'false' || downcased === '1' || downcased === '0')) {
      throw new Error('A boolean must be one of: true, false, 0, 1');
    }
  }
});

// eslint-disable-next-line no-unused-vars
function buildAppProperties() {
  var schema = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var customEnv = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  var config = (0, _convict2.default)(_extends({}, _appPropertiesDefaultSchema2.default, schema));

  config.validate({ strict: true });

  return config;
}

exports.default = buildAppProperties;
//# sourceMappingURL=buildAppProperties.server.js.map

//@flow
import bunyan from 'bunyan';
import { logLevel, logStreams } from '..';

export default function buildLogger({name, appProperties}: {name: string, appProperties: AppProperties<any>}) {
  const env = appProperties.get('env') || "development";
  const configLogLevel = appProperties.get('logger.level');
  const level = (configLogLevel && configLogLevel !== 'env') ? configLogLevel : logLevel(env);
  const streams: Array<Object> = logStreams();

  return bunyan.createLogger({
    name,
    level,
    src: env !== 'production',
    serializers: bunyan.stdSerializers,
    streams,
  });
}
